<h1>Products List</h1>


<a asp-action="Create" asp-controller="Products">Create New</a>
<table class="table" id="products">
    <thead>
        <tr>
            <th>Id</th>
            <th>Name</th>
            <th>UnitPrice</th>
            <th>Category Id</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<link href="https://cdn.datatables.net/v/dt/dt-1.13.4/datatables.min.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
<script src="https://cdn.datatables.net/v/dt/dt-1.13.4/datatables.min.js"></script>
@*<link href="css\jquery.datatables.css" rel="stylesheet" />
<script src="js\datatables.datatables.js"></script>*@

<script>
    $(function () {
        // GET https://localhost:7292/api/products
        $.ajax({
            url: 'https://localhost:7292/api/products',
            type: 'GET',
            success: function (response) {
                // alert('api call success');
                // console.log(response);

                $('#products').DataTable({
                    data: response,
                    columns: [
                        { title: 'Id', data: 'Id' },
                        { title: 'Name', data: 'Name' },
                        { title: 'UnitPrice', data: 'UnitPrice' },
                        { title: 'CategoryId', data: 'CategoryId' }
                    ]
                    //columnDefs: [
                    //    { targets: [0]},
                    //    { targets: [1]},
                    //    { targets: [2]}
                    //]
                });

            },
            error: function (reason) {
                alert('api call failed');
            }
        });
    });
</script>